{"version":3,"sources":["src/game.ts","src/index.ts"],"names":[],"mappings":";;;;;;ACAA,IAAA,MAAA,GAAA,OAAA,CAAA,QAAA,CAAA;ADAA,IAAA,IAAA,GAAA,YAAA;AAME,ACJF,IAAM,ODIJ,CCJY,GDIZ,ACJ+B,CDIX,OCJmB,CAAC,CDIxC,EAA6C,WCJd,CAAwB,WAAxB,CAAjC;ADIsB,ACHtB,IAAM,IAAI,CDGY,ECHT,IAAI,GDGK,GAAA,ACHL,CAAA,IAAJ,CAAS,GDGA,KCHT,CAAb;ADDE,SAAA,QAAA,GAA4C,IAA5C;AAKE,SAAK,QAAL,GAAgB,IAAI,KAAJ,CAAoB,CAApB,CAAhB;AACA,SAAK,QAAL,CAAc,CAAd,IAAmB,gBAAgB,KAAhB,CAAsB,EAAtB,CAAnB;AACA,SAAK,QAAL,CAAc,CAAd,IAAmB,gBAAgB,KAAhB,CAAsB,EAAtB,CAAnB;AACA,SAAK,QAAL,CAAc,CAAd,IAAmB,gBAAgB,KAAhB,CAAsB,EAAtB,CAAnB;AACA,SAAK,QAAL,CAAc,CAAd,IAAmB,gBAAgB,KAAhB,CAAsB,EAAtB,CAAnB;AAEA,SAAK,UAAL;AACD;;AAEO,EAAA,IAAA,CAAA,SAAA,CAAA,UAAA,GAAR,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACE,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,QAAL,CAAc,MAAlC,EAA0C,CAAC,EAA3C,EAA+C;AAC7C,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,QAAL,CAAc,CAAd,EAAiB,MAArC,EAA6C,CAAC,EAA9C,EAAkD;AAChD,YAAM,GAAG,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;;AAEA,YAAI,KAAK,QAAL,CAAc,CAAd,EAAiB,CAAjB,MAAwB,GAA5B,EAAiC;AAC/B,UAAA,GAAG,CAAC,SAAJ,CAAc,GAAd,CAAkB,QAAlB;AACD,SAFD,MAEO;AACL,UAAA,GAAG,CAAC,SAAJ,CAAc,GAAd,CAAkB,MAAlB;AACA,UAAA,GAAG,CAAC,OAAJ,CAAY,CAAZ,GAAgB,CAAC,CAAC,QAAF,EAAhB;AACA,UAAA,GAAG,CAAC,OAAJ,CAAY,CAAZ,GAAgB,CAAC,CAAC,QAAF,EAAhB;;AACA,UAAA,GAAG,CAAC,OAAJ,GAAc,UAAC,KAAD,EAAM;AAAK,mBAAA,KAAI,CAAC,SAAL,CAAe,KAAf,CAAA;AAAqB,WAA9C;AACD;;AAED,aAAK,SAAL,CAAe,WAAf,CAA2B,GAA3B;AACA,aAAK,SAAL,CAAe,CAAf,EAAkB,CAAlB;AACD;AACF;;AAED,SAAK,eAAL,GAAuB,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAvB;AACA,SAAK,eAAL,CAAqB,SAArB,CAA+B,GAA/B,CAAmC,QAAnC;AACA,SAAK,eAAL,CAAqB,SAArB,GAAiC,IAAjC;AACA,SAAK,SAAL,CAAe,WAAf,CAA2B,KAAK,eAAhC;AACD,GAvBO;;AAyBA,EAAA,IAAA,CAAA,SAAA,CAAA,SAAA,GAAR,UAAkB,KAAlB,EAAmC;AACjC,QAAM,GAAG,GAAoC,KAAK,CAAC,MAAN,CAAc,OAAd,CAAsB,OAAtB,CAA7C;AACA,QAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,OAAJ,CAAY,CAAb,CAAlB;AACA,QAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,OAAJ,CAAY,CAAb,CAAlB;AACA,IAAA,OAAO,CAAC,GAAR,CAAY,CAAZ,EAAe,CAAf;;AAEA,QAAI,KAAK,QAAL,CAAc,CAAd,EAAiB,CAAjB,CAAJ,EAAyB;AACvB;AACA,UAAI,KAAK,QAAL,KAAkB,KAAK,QAAL,CAAc,CAAd,KAAoB,CAApB,IAAyB,KAAK,QAAL,CAAc,CAAd,KAAoB,CAA/D,CAAJ,EAAuE;AACrE,YAAM,gBAAgB,GAAG,KAAK,QAA9B;AACA,aAAK,QAAL,GAAgB,IAAhB;AACA,aAAK,SAAL,CAAe,gBAAgB,CAAC,CAAhC,EAAmC,gBAAgB,CAAC,CAApD;AACD;;AAED,WAAK,QAAL,GAAgB;AAAE,QAAA,CAAC,EAAE,CAAL;AAAQ,QAAA,CAAC,EAAE;AAAX,OAAhB;AACA,WAAK,SAAL,CAAe,CAAf,EAAkB,CAAlB;AACD,KAVD,MAUO;AACL;AACA,UAAI,KAAK,QAAT,EAAmB;AACjB;AACA,YAAM,gBAAgB,GAAG,KAAK,QAA9B;AACA,aAAK,QAAL,GAAgB,IAAhB;AAEA,aAAK,QAAL,CAAc,CAAd,EAAiB,CAAjB,IACE,KAAK,QAAL,CAAc,gBAAgB,CAAC,CAA/B,EAAkC,gBAAgB,CAAC,CAAnD,CADF;AAEA,aAAK,QAAL,CAAc,gBAAgB,CAAC,CAA/B,EAAkC,gBAAgB,CAAC,CAAnD,IAAwD,GAAxD;AAEA,aAAK,SAAL,CAAe,gBAAgB,CAAC,CAAhC,EAAmC,gBAAgB,CAAC,CAApD;AACA,aAAK,SAAL,CAAe,CAAf,EAAkB,CAAlB,EAViB,CAYjB;AACD;AACF;AACF,GAjCO;;AAmCA,EAAA,IAAA,CAAA,SAAA,CAAA,SAAA,GAAR,UAAkB,CAAlB,EAA6B,CAA7B,EAAsC;AACpC;AACA,QAAM,GAAG,GAAG,KAAK,SAAL,CAAe,QAAf,CAAwB,CAAC,GAAG,EAAJ,GAAS,CAAjC,CAAZ;;AACA,WAAO,GAAG,CAAC,SAAX,EAAsB;AACpB,MAAA,GAAG,CAAC,WAAJ,CAAgB,GAAG,CAAC,SAApB;AACD;;AAED,IAAA,GAAG,CAAC,SAAJ,CAAc,MAAd,CAAqB,UAArB,EAPoC,CASpC;;AACA,QAAI,KAAK,QAAL,CAAc,CAAd,EAAiB,CAAjB,CAAJ,EAAyB;AACvB,UAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAf;AACA,MAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,QAArB;AACA,MAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,YAAY,KAAK,QAAL,CAAc,CAAd,EAAiB,CAAjB,EAAoB,WAApB,EAAjC;;AAEA,UAAI,KAAK,QAAL,IAAiB,KAAK,QAAL,CAAc,CAAd,KAAoB,CAArC,IAA0C,KAAK,QAAL,CAAc,CAAd,KAAoB,CAAlE,EAAqE;AACnE,QAAA,GAAG,CAAC,SAAJ,CAAc,GAAd,CAAkB,UAAlB;AACD;;AAED,MAAA,GAAG,CAAC,WAAJ,CAAgB,MAAhB;AACD,KApBmC,CAsBpC;;;AACA,QAAI,CAAC,KAAK,CAAN,IAAW,CAAC,KAAK,CAArB,EAAwB;AACtB,UAAI,CAAC,KAAK,CAAV,EAAa;AACX,YAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAf;AACA,QAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,UAArB;AACA,QAAA,GAAG,CAAC,WAAJ,CAAgB,MAAhB;AACD,OAJD,MAIO,IAAI,CAAC,KAAK,CAAV,EAAa;AAClB,YAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAf;AACA,QAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,UAArB;AACA,QAAA,GAAG,CAAC,WAAJ,CAAgB,MAAhB;AACD,OAJM,MAIA,IAAI,CAAC,KAAK,CAAV,EAAa;AAClB,YAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAf;AACA,QAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,UAArB;AACA,QAAA,GAAG,CAAC,WAAJ,CAAgB,MAAhB;AACD,OAJM,MAIA,IAAI,CAAC,KAAK,CAAV,EAAa;AAClB,YAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAf;AACA,QAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,UAArB;AACA,QAAA,GAAG,CAAC,WAAJ,CAAgB,MAAhB;AACD;AACF;AACF,GA1CO;;AA4CA,EAAA,IAAA,CAAA,SAAA,CAAA,QAAA,GAAR,UAAiB,CAAjB,EAA4B,CAA5B,EAAqC;AACnC,WACE,KAAK,QAAL,CAAc,CAAd,EAAiB,CAAjB,MAAwB,GAAxB,IACA,KAAK,QAAL,CAAc,CAAd,EAAiB,CAAjB,MAAwB,GADxB,IAEA,KAAK,QAAL,CAAc,CAAd,EAAiB,CAAjB,MAAwB,GAFxB,IAGA,KAAK,QAAL,CAAc,CAAd,EAAiB,CAAjB,MAAwB,GAJ1B;AAMD,GAPO;;AAQV,SAAA,IAAA;AAhIA,CAAA,EAAA;;AAAa,OAAA,CAAA,IAAA,GAAA,IAAA","file":"src.f10117fe.js","sourceRoot":"..","sourcesContent":["export class Game {\r\n  gameGrid: Array<string[]>;\r\n  selected: { x: number; y: number } | null = null;\r\n\r\n  private pointsContainer: HTMLDivElement;\r\n\r\n  constructor(private container: HTMLDivElement) {\r\n    this.gameGrid = new Array<string[]>(4);\r\n    this.gameGrid[0] = '#...........#'.split('');\r\n    this.gameGrid[1] = '###B#C#B#D###'.split('');\r\n    this.gameGrid[2] = '###A#D#C#A###'.split('');\r\n    this.gameGrid[3] = '#############'.split('');\r\n\r\n    this.initialize();\r\n  }\r\n\r\n  private initialize(): void {\r\n    for (let y = 0; y < this.gameGrid.length; y++) {\r\n      for (let x = 0; x < this.gameGrid[y].length; x++) {\r\n        const div = document.createElement('div');\r\n\r\n        if (this.gameGrid[y][x] === '#') {\r\n          div.classList.add('barrel');\r\n        } else {\r\n          div.classList.add('tile');\r\n          div.dataset.x = x.toString();\r\n          div.dataset.y = y.toString();\r\n          div.onclick = (event) => this.clickTile(event);\r\n        }\r\n\r\n        this.container.appendChild(div);\r\n        this.updateDiv(y, x);\r\n      }\r\n    }\r\n\r\n    this.pointsContainer = document.createElement('div');\r\n    this.pointsContainer.classList.add('points');\r\n    this.pointsContainer.innerText = '27';\r\n    this.container.appendChild(this.pointsContainer);\r\n  }\r\n\r\n  private clickTile(event: MouseEvent): void {\r\n    const div = <HTMLDivElement>(<HTMLDivElement>event.target).closest('.tile');\r\n    const x = parseInt(div.dataset.x);\r\n    const y = parseInt(div.dataset.y);\r\n    console.log(x, y);\r\n\r\n    if (this.isAnimal(y, x)) {\r\n      // select animal\r\n      if (this.selected && (this.selected.x !== x || this.selected.y !== y)) {\r\n        const previousSelected = this.selected;\r\n        this.selected = null;\r\n        this.updateDiv(previousSelected.y, previousSelected.x);\r\n      }\r\n\r\n      this.selected = { x: x, y: y };\r\n      this.updateDiv(y, x);\r\n    } else {\r\n      // move animal\r\n      if (this.selected) {\r\n        // TODO: check path\r\n        const previousSelected = this.selected;\r\n        this.selected = null;\r\n\r\n        this.gameGrid[y][x] =\r\n          this.gameGrid[previousSelected.y][previousSelected.x];\r\n        this.gameGrid[previousSelected.y][previousSelected.x] = '.';\r\n\r\n        this.updateDiv(previousSelected.y, previousSelected.x);\r\n        this.updateDiv(y, x);\r\n\r\n        // TODO: check if finished\r\n      }\r\n    }\r\n  }\r\n\r\n  private updateDiv(y: number, x: number): void {\r\n    // find div and remove all children\r\n    const div = this.container.children[y * 13 + x];\r\n    while (div.lastChild) {\r\n      div.removeChild(div.lastChild);\r\n    }\r\n\r\n    div.classList.remove('selected');\r\n\r\n    // add animal\r\n    if (this.isAnimal(y, x)) {\r\n      const animal = document.createElement('div');\r\n      animal.classList.add('animal');\r\n      animal.classList.add('animal-' + this.gameGrid[y][x].toLowerCase());\r\n\r\n      if (this.selected && this.selected.x === x && this.selected.y === y) {\r\n        div.classList.add('selected');\r\n      }\r\n\r\n      div.appendChild(animal);\r\n    }\r\n\r\n    // set target\r\n    if (y === 1 || y === 2) {\r\n      if (x === 3) {\r\n        const target = document.createElement('div');\r\n        target.classList.add('target-a');\r\n        div.appendChild(target);\r\n      } else if (x === 5) {\r\n        const target = document.createElement('div');\r\n        target.classList.add('target-b');\r\n        div.appendChild(target);\r\n      } else if (x === 7) {\r\n        const target = document.createElement('div');\r\n        target.classList.add('target-c');\r\n        div.appendChild(target);\r\n      } else if (x === 9) {\r\n        const target = document.createElement('div');\r\n        target.classList.add('target-d');\r\n        div.appendChild(target);\r\n      }\r\n    }\r\n  }\r\n\r\n  private isAnimal(y: number, x: number): boolean {\r\n    return (\r\n      this.gameGrid[y][x] === 'A' ||\r\n      this.gameGrid[y][x] === 'B' ||\r\n      this.gameGrid[y][x] === 'C' ||\r\n      this.gameGrid[y][x] === 'D'\r\n    );\r\n  }\r\n}\r\n","import { Game } from './game';\r\n\r\nconst gameArea = <HTMLDivElement>document.getElementById('game-area');\r\nconst game = new Game(gameArea);"]}